<view class="page">
  <view class="header">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">â†</text>
      <text>è¿”å›</text>
    </view>
    <view class="title">ç”¨æˆ·è¯¦æƒ…</view>
  </view>
  
  <view class="content" wx:if="{{!loading}}">
    <!-- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ -->
    <view class="user-card">
      <view class="user-avatar">
        <image class="avatar" src="{{userInfo.avatarUrl || '/images/avatar.png'}}" mode="aspectFill"/>
      </view>
      <view class="user-name">
        <text class="nickname">{{userInfo.nickName}}</text>
        <text class="user-id">ID: {{userInfo._openid}}</text>
      </view>
      <view class="user-location">
        <text class="location-icon">ğŸ“</text>
        <text>æœ€è¿‘æ´»è·ƒ: {{userInfo.lastUpdateTime ? userInfo.lastUpdateTime.toLocaleString() : 'æœªçŸ¥'}}</text>
      </view>
    </view>
    
    <!-- ç”¨æˆ·æ ‡ç­¾ -->
    <view class="section">
      <view class="section-title">ç”¨æˆ·æ ‡ç­¾</view>
      <view class="tags-container">
        <view class="tag" wx:for="{{userInfo.tags.length > 0 ? userInfo.tags : userTags}}" wx:key="index">{{item}}</view>
      </view>
    </view>
    
    <!-- å¯ä¿¡æ•°æ® -->
    <view class="section">
      <view class="section-title">å¯ä¿¡æ•°æ®</view>
      <view class="trust-data-container">
        <view class="trust-data-item">
          <view class="data-label">ä¿¡ä»»åˆ†</view>
          <view class="data-value">{{userInfo.trustData.trustScore || userTrustData.trustScore}}</view>
        </view>
        <view class="trust-data-item">
          <view class="data-label">å“åº”ç‡</view>
          <view class="data-value">{{userInfo.trustData.responseRate || userTrustData.responseRate}}</view>
        </view>
        <view class="trust-data-item">
          <view class="data-label">å¯çº¦æ—¶é—´</view>
          <view class="data-value">{{userInfo.trustData.availableTime || userTrustData.availableTime}}</view>
        </view>
        <view class="trust-data-item">
          <view class="data-label">å®‰å…¨è¯„åˆ†</view>
          <view class="data-value">{{userInfo.trustData.safetyRating || userTrustData.safetyRating}}</view>
        </view>
      </view>
    </view>
    
    <!-- ç”¨æˆ·ä»‹ç» -->
    <view class="section">
      <view class="section-title">ç”¨æˆ·ä»‹ç»</view>
      <view class="user-intro">
        {{userInfo.introduction || 'è¿™ä¸ªç”¨æˆ·å¾ˆæ‡’ï¼Œè¿˜æ²¡æœ‰å¡«å†™ä»‹ç»~'}}
      </view>
    </view>
    
    <!-- ç”¨æˆ·ç›¸å†Œ -->
    <view class="section" wx:if="{{userInfo.mediaList && userInfo.mediaList.length > 0}}">
      <view class="section-title">ç”¨æˆ·ç›¸å†Œ</view>
      <view class="media-grid">
        <view class="media-item" wx:for="{{userInfo.mediaList}}" wx:key="index" bindtap="previewMedia" data-index="{{index}}">
          <image class="media-image" src="{{item.type === 'image' ? item.fileID : item.thumbUrl || '/images/video-placeholder.png'}}" mode="aspectFill"></image>
          <view class="media-type-icon" wx:if="{{item.type === 'video'}}">
            <text class="video-icon">â–¶</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- è”ç³»æŒ‰é’® -->
    <view class="contact-btn">è”ç³»Ta</view>
  </view>
  
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view> 